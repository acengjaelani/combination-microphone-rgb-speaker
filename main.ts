input.onSound(DetectedSound.Loud, function () {
    basic.showIcon(IconNames.EighthNote)

    let melody = [
        [659, 500, 20],   // [frekuensi, durasi, vibrato]
        [659, 500, 10],
        [698, 500, 0],
        [784, 500, 0],
        [784, 500, 0],
        [698, 500, 0],
        [659, 500, 0],
        [587, 500, 0],
        [523, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [659, 500, 0],
        [659, 500, 0],
        [587, 750, 0],
        [587, 500, 0],
        [659, 500, 0],
        [659, 500, 0],
        [698, 500, 0],
        [784, 500, 0],
        [784, 500, 0],
        [698, 500, 0],
        [659, 500, 0],
        [587, 500, 0],
        [523, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [659, 500, 0],
        [587, 500, 0],
        [523, 750, 0],
        [523, 500, 0],
        [587, 500, 0],
        [587, 500, 0],
        [659, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [659, 750, 0],
        [698, 750, 0],
        [659, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [659, 750, 0],
        [698, 750, 0],
        [659, 500, 0],
        [587, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [392, 500, 0],
        [659, 500, 0],
        [659, 500, 0],
        [659, 500, 0],
        [698, 500, 0],
        [784, 500, 0],
        [784, 500, 0],
        [698, 500, 0],
        [659, 500, 0],
        [587, 500, 0],
        [523, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [659, 500, 0],
        [587, 500, 0],
        [523, 750, 0],
        [523, 500, 0],
        [587, 500, 0],
        [587, 500, 0],
        [659, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [659, 750, 0],
        [698, 750, 0],
        [659, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [659, 750, 0],
        [698, 750, 0],
        [659, 500, 0],
        [587, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [392, 500, 0],
        [659, 500, 0],
        [659, 500, 0],
        [659, 500, 0],
        [698, 500, 0],
        [784, 500, 0],
        [784, 500, 0],
        [698, 500, 0],
        [659, 500, 0],
        [523, 500, 0],
        [523, 500, 0],
        [523, 500, 0],
        [587, 500, 0],
        [659, 500, 0],
        [587, 500, 0],
        [523, 750, 0],
        [523, 500, 0],
        [587, 500, 0],
        [523, 750, 0],
        [523, 500, 0],
        [587, 750, 0],
        [659, 500, 0],
        [698, 500, 0],
        [659, 750, 0],
        [523, 500, 0],
        [988, 500, 0],
        [880, 750, 0],
        [880, 500, 0],
        [698, 750, 0],
        [587, 750, 0],
        [523, 750, 0],
        [494, 750, 0],
        [587, 750, 0],
        [494, 750, 0],
        [440, 750, 0],
        [392, 750, 0],
        [440, 750, 0],
        [494, 750, 0],
        [523, 750, 0],
        [659, 750, 0],
        [587, 750, 0],
        [494, 750, 0],
        [523, 500, 0],
        [523, 500, 0],
        [523, 250, 0],
        [523, 500, 0]
    ]

    function playMelody() {
        for (let note of melody) {
            music.playTone(note[0], note[1])
            basic.pause(note[2])
        }
    }

    // Memainkan melodi saat suara terdeteksi
    playMelody()
})

// Logika untuk mengubah warna lampu LED
let colors = [
    [255, 0, 0],    // Merah
    [0, 255, 0],    // Hijau
    [0, 0, 255],    // Biru
    [255, 255, 0],  // Kuning
    [0, 255, 255],  // Cyan
    [255, 0, 255],  // Ungu
    [255, 255, 255],// Putih
    [128, 128, 128],// Abu-abu
    [255, 165, 0],  // Oranye
    [128, 0, 128],  // Ungu tua
    // Tambahkan warna-warna tambahan di sini
    // Contoh: Hijau tua
    [0, 128, 0]
];

let colorIndex = 0;

basic.forever(function () {
    turtleBit.SetLed(
        LR.LeftSide,
        colors[colorIndex][0],
        colors[colorIndex][1],
        colors[colorIndex][2]
    );

    turtleBit.SetLed(
        LR.RightSide,
        colors[colorIndex][0],
        colors[colorIndex][1],
        colors[colorIndex][2]
    );

    colorIndex = (colorIndex + 1) % colors.length;
    basic.pause(1000);
});